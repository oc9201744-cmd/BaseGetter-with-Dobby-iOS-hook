name: "XO-VIP-FINAL-FIXED"

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  build:
    runs-on: macos-latest

    steps:
    # Depoyu Çek
    - name: Checkout Repository
      uses: actions/checkout@v4

    # Xcode Kurulumu
    - name: Set up Xcode
      uses: maxim-lobanov/setup-xcode@v1
      with:
        xcode-version: 'latest-stable'

    # Derleme işlemi: Projeyi, hedefi ve frameworkleri yapılandır
    - name: Build Dylib
      run: |
        # 1. Proje Dosyasını Bul
        PROJECT_FILE=$(find . -type d -name "*.xcodeproj" | head -n 1)
        if [ -z "$PROJECT_FILE" ]; then
          echo "HATA: .xcodeproj dosyası bulunamadı!"
          exit 1
        fi
        echo "Proje Dosyası: $PROJECT_FILE"
        
        # Hedef ismini kontrol et
        TARGET_NAME=$(xcodebuild -list -project "$PROJECT_FILE" | grep -A 2 "Targets:" | tail -n 1 | xargs)
        if [ -z "$TARGET_NAME" ]; then
          echo "HATA: Hedef bulunamadı!"
          exit 1
        fi
        echo "Bulunan Hedef: $TARGET_NAME"

        # Derleme Komutu: Gereken tüm dizinleri ve bayrakları belirle
       